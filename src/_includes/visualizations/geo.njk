{% extends "base.njk" %}

{% block head %}
    <title>PSC Lab Space {{ person }} Subject Line Geo-Reference Map</title>

    <link rel="stylesheet" href="../../../styles/geostyles.css"></link>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css"/>

    <script type="text/javascript" src="../../../JsScripts/geomap.js"></script>

{% endblock %}

{% block content %}
    <div class="main-body">

        <h3 class="subtitle">{{ person }}
            {{built.Btitles["geo"]}}</h3>

        <div style="position: absolute; left: 50%; transform: translateX(-50%); margin-top: -5px; margin-bottom: 40px;">
            <button class="button-1" role="button" onclick="window.location.href='/projects/{{ initials }}/index.html';">Back to {{ initials }}</button>
            <button class="button-1" role="button" onclick="window.location.href='/tools/geo/index.html';">Back to Geo-Reference Maps</button>
        </div>
        <br><br>

        {% set customParams = subpage.params %}
        <!-- Custom Paramters -->

        {% if customParams.files %}
            <script>
                const filelist = {{ customParams.files | dump | safe }};
            </script>

            <p>
                {{ customParams.desctext }}
                <br><br>
                You can click on the information icon in the top right for more information on how to specifically interact with the map.
            </p>

            <br>

            <div id="map"></div>

            <script>
                Leafmap("{{initials}}", filelist);
            </script>

        {% else %}
            <p>No Subject Line Geo-Reference Map detected for this author.</p>
        {% endif %}

    </div>

{% endblock %}